import{R as y,W as v,j as e,a as w,Y as N}from"./app-CgBWOMij.js";import{A as P}from"./AuthenticatedLayout-C9VMaLjv.js";import{S as F}from"./steps-edit-CnG63pyT.js";import{I as x}from"./InputError-DduDedTP.js";import{L as _}from"./loader-zr8V0opz.js";import"./transition-2ORAGBeu.js";import"./logo_rmi-CAq1HG6M.js";import"./createLucideIcon-BlCxYxjK.js";function L({pesantren:o}){const[i,c]=y.useState([]),m=10,{data:f,setData:a,post:p,put:R,errors:n,reset:k,processing:t}=v({pesantren_id:o.id,photos:null,video_profil:"",_method:"PUT"}),h=s=>{const r=s.target.files;if(r&&r.length>m){alert(`You can only upload up to ${m} files.`),s.target.value="",a("photos",null),c([]);return}const b=Array.from(r||[]);a("photos",b);const u=[];for(let l of r||[]){const d=new FileReader;d.readAsDataURL(l),u.push(new Promise((j,E)=>{d.onload=()=>j(d.result)}))}Promise.all(u).then(l=>{c(l)})},g=s=>{s.preventDefault(),p(route("pesantren.photo.update",o.id))};return e.jsxs("form",{className:"space-y-6",onSubmit:g,children:[e.jsx("div",{className:"flex flex-wrap justify-center gap-2 max-w-3/4",children:i.map((s,r)=>e.jsx("img",{src:s instanceof File?URL.createObjectURL(s):s,alt:`Preview ${r+1}`,className:"h-32"},r))}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"w-full sm:w-1/2",children:[e.jsxs("label",{className:"block text-sm font-medium text-center text-gray-700",children:["Foto-foto Pesantren ",e.jsx("span",{className:"text-xs text-gray-400",children:"(Max 10 Foto, dengan ukuran max 10Mb per Foto)"})]}),e.jsx("input",{disabled:t,multiple:!0,onChange:h,type:"file",id:"photos",accept:"image/*",className:`block w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${n.photos?"border-red-300 text-red-900 focus:ring-red-500 focus:border-red-500":""}`}),e.jsx(x,{message:n.photos})]})}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"w-full sm:w-1/2",children:[e.jsx("label",{className:"block text-sm font-medium text-center text-gray-700",children:"Link Video Profil"}),e.jsx("input",{disabled:t,value:f.video_profil,onChange:s=>a("video_profil",s.target.value),type:"text",id:"video_profil",placeholder:"",className:`block w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${n.video_profil?"border-red-300 text-red-900 focus:ring-red-500 focus:border-red-500":""}`}),e.jsx(x,{message:n.video_profil})]})}),e.jsxs("div",{className:"px-4 py-3 text-right sm:px-6",children:[e.jsx("button",{children:e.jsx(w,{disabled:t,href:route("pesantren.index"),className:`inline-flex items-center px-4 py-2 mr-4 text-sm font-medium text-indigo-700 bg-indigo-100 border border-transparent rounded-md hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${t?"opacity-25 cursor-not-allowed":""}`,children:"Cancel"})}),e.jsx("button",{disabled:t,type:"submit",className:`inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 items-center ${t?"opacity-25 cursor-not-allowed":""}`,children:t?e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"w-3 h-3 mr-2 animate-spin"})," Loading..."]}):"Save"})]})]})}function Y({auth:o,pesantren:i}){return e.jsxs(P,{user:o.user,header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Edit Pesantren"}),children:[e.jsx(N,{title:"Pesantren"}),e.jsx("div",{className:"sm:flex sm:items-center",children:e.jsxs("div",{className:"sm:flex-auto",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Edit a Pesantren"}),e.jsx("p",{className:"space-y-1 text-sm text-gray-700",children:"Use this form to edit a Pesantren."})]})}),e.jsx(F,{pesantren:i}),e.jsx(L,{pesantren:i})]})}export{Y as default};
